// Copyright 2020 misatos.angel@gmail.com.  All rights reserved.

package roll20msg

import (
	"testing"
	"encoding/json"
)


func TestJsonMsgParse(t *testing.T) {
	jsonData := `{
		".priority": 1600617013935.0,
		"avatar": "/users/avatar/5436010/30",
		"content": "  {{name=Sneak Attack}} {{type=feat}} {{showchar=$[[0]]}} {{charname=Jess}} {{abilitytype=Class Feature}}  {{shortdesc=}} {{descflag=$[[1]]}}{{desc=If a rogue can catch an opponent when he is unable to defend himself effectively from her attack, she can strike a vital spot for extra damage.<br/>\n<br/>\nThe rogue's attack deals extra damage anytime her target would be denied a Dexterity bonus to AC (whether the target actually has a Dexterity bonus or not), or when the rogue flanks her target. This extra damage is 1d6 at 1st level, and increases by 1d6 every two rogue levels thereafter. Should the rogue score a critical hit with a sneak attack, this extra damage is not multiplied. Ranged attacks can count as sneak attacks only if the target is within 30 feet.<br/>\n<br/>\nWith a weapon that deals nonlethal damage (like a sap, whip, or an unarmed strike), a rogue can make a sneak attack that deals nonlethal damage instead of lethal damage. She cannot use a weapon that deals lethal damage to deal nonlethal damage in a sneak attack, not even with the usual –4 penalty.<br/>\n<br/>\nThe rogue must be able to see the target well enough to pick out a vital spot and must be able to reach such a spot. A rogue cannot sneak attack while striking a creature with concealment.}} {{shownotes=$[[2]]}} {{notes=}}",
		"inlinerolls": [{
			"expression": "1",
			"results": {
				"resultType": "M",
				"rolls": [{
					"expr": 1,
					"type": "M"
				}],
				"total": 1,
				"type": "V"
			},
			"signature": false
		}, {
			"expression": "1",
			"results": {
				"resultType": "M",
				"rolls": [{
					"expr": 1,
					"type": "M"
				}],
				"total": 1,
				"type": "V"
			},
			"signature": false
		}, {
			"expression": "1",
			"results": {
				"resultType": "M",
				"rolls": [{
					"expr": 1,
					"type": "M"
				}],
				"total": 1,
				"type": "V"
			},
			"signature": false
		}],
		"playerid": "-MHfzytbYjUHViyumQwk",
		"rolltemplate": "pc",
		"type": "general",
		"who": "Misatos A. (GM)"
}	`
	var msg Msg
	err := json.Unmarshal([]byte(jsonData), &msg)
	if err != nil {
		t.Errorf("JSON Parse failed: "+err.Error())
	}
	if len(msg.InlineRolls) != 3 {
		t.Errorf("Found %d inline roles, expected 3", len(msg.InlineRolls))
	}
	if msg.GetAvatar() != "/users/avatar/5436010/30" {
		t.Errorf("Avatar was %s not '/users/avatar/5436010/30'", msg.GetAvatar())
	}
}

func TestJsonMsgStreamParse(t *testing.T) {
	jsonData := `[{"-MHg07MW-TJQV6OANj0a":{".priority":1600613811809.0,"avatar":"/users/avatar/5436010/30","content":" {{title=Ability Scores Rolls: Dice Pool}} {{r1=Not set}} {{r2=Not set}} {{r3=Not set}} {{r4=Not set}} {{r5=Not set}} {{r6=Not set}} {{r1name=^{strength}}} {{r2name=^{dexterity}}} {{r3name=^{constitution}}} {{r4name=^{intelligence}}} {{r5name=^{wisdom}}} {{r6name=^{charisma}}}","listenerid":"-MHg07NaW24SnQVvicsi","playerid":"-MHfzytbYjUHViyumQwk","rolltemplate":"mancerroll","type":"general","who":"Misatos A. (GM)"}},{"-MHgCL7MzJtQVogYD8k6":{".priority":1600617013935.0,"avatar":"/users/avatar/5436010/30","content":"  {{name=Sneak Attack}} {{type=feat}} {{showchar=$[[0]]}} {{charname=Jess}} {{abilitytype=Class Feature}}  {{shortdesc=}} {{descflag=$[[1]]}}{{desc=If a rogue can catch an opponent when he is unable to defend himself effectively from her attack, she can strike a vital spot for extra damage.<br/>\n<br/>\nThe rogue's attack deals extra damage anytime her target would be denied a Dexterity bonus to AC (whether the target actually has a Dexterity bonus or not), or when the rogue flanks her target. This extra damage is 1d6 at 1st level, and increases by 1d6 every two rogue levels thereafter. Should the rogue score a critical hit with a sneak attack, this extra damage is not multiplied. Ranged attacks can count as sneak attacks only if the target is within 30 feet.<br/>\n<br/>\nWith a weapon that deals nonlethal damage (like a sap, whip, or an unarmed strike), a rogue can make a sneak attack that deals nonlethal damage instead of lethal damage. She cannot use a weapon that deals lethal damage to deal nonlethal damage in a sneak attack, not even with the usual –4 penalty.<br/>\n<br/>\nThe rogue must be able to see the target well enough to pick out a vital spot and must be able to reach such a spot. A rogue cannot sneak attack while striking a creature with concealment.}} {{shownotes=$[[2]]}} {{notes=}}","inlinerolls":[{"expression":"1","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"}],"total":1,"type":"V"},"signature":false},{"expression":"1","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"}],"total":1,"type":"V"},"signature":false},{"expression":"1","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"}],"total":1,"type":"V"},"signature":false}],"playerid":"-MHfzytbYjUHViyumQwk","rolltemplate":"pc","type":"general","who":"Misatos A. (GM)"},"-MHgH_y_cL65LrDUeFI_":{".priority":1600618389550.0,"avatar":"/users/avatar/5436010/30","content":"  {{name=}} {{type=feat}} {{showchar=$[[0]]}} {{charname=Jess}} {{shortdesc=}} {{feattype=^{general}}} {{prerequisites=}} {{benefits=}} {{normal=}} {{special=}} {{descflag=$[[1]]}}{{desc=}} {{shownotes=$[[2]]}} {{notes=}}","inlinerolls":[{"expression":"1","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"}],"total":1,"type":"V"},"signature":false},{"expression":"1","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"}],"total":1,"type":"V"},"signature":false},{"expression":"1","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"}],"total":1,"type":"V"},"signature":false}],"playerid":"-MHfzytbYjUHViyumQwk","rolltemplate":"pc","type":"general","who":"Misatos A. (GM)"},"-MHgSdiDTq33ll1Cooht":{".priority":1600621289146.0,"avatar":"/users/avatar/3836445/30","content":"{\"type\":\"V\",\"rolls\":[{\"type\":\"R\",\"dice\":2,\"sides\":4,\"mods\":{},\"results\":[{\"v\":2},{\"v\":1}]},{\"type\":\"C\",\"text\":\" height/weight modifier\"}],\"resultType\":\"sum\",\"total\":3}","origRoll":"2d4 height/weight modifier","playerid":"-MHg4cBoufgA6Qc3bt17","signature":"00e0516a343b3247a78d797b4bab2935b0dff9fad2321ddd91e5340a0156caae712b60eca664be009128ff21e6324f52f88e2ed25a90f7d263deadbaf1c5f0e8","type":"rollresult","who":"setrofim"},"-MHgSrcqXqL0V1LU1a7w":{".priority":1600621346017.0,"avatar":"/users/avatar/3836445/30","content":"Well, Brice is pretty small","playerid":"-MHg4cBoufgA6Qc3bt17","type":"general","who":"setrofim"},"-MHgUMYv3KsA62O7Vv_i":{".priority":1600621738274.0,"avatar":"/users/avatar/1004837/30","content":" {{title=Wealth Roll}} {{r1=$[[0]]}} {{r1name=^{roll}}}","inlinerolls":[{"expression":"4d6 * 10","results":{"resultType":"sum","rolls":[{"dice":4,"results":[{"v":6},{"v":2},{"v":1},{"v":4}],"sides":6,"type":"R"},{"expr":"*10","type":"M"}],"total":130,"type":"V"},"rollid":"-MHgUMhQJRk9bRL6L7I6","signature":"15ecfb103e0c0ff4df1bfbd80b54ff7ccf92911000d0958324e50255fa143b66315ce52220abe155609caa13256b7950888a78e659c0d2df2b7b22a6c3068886"}],"listenerid":"-MHgUMhJ20u7QHmsAoRW","playerid":"-MHg4gg3Eaij4VeiKaZd","rolltemplate":"mancerroll","type":"general","who":"Anthony R."},"-MHgZ-fhxty2E3f9q0dD":{".priority":1600622955664.0,"avatar":"/users/avatar/3836445/30","content":"{\"type\":\"V\",\"rolls\":[{\"type\":\"M\",\"expr\":\"300+\"},{\"type\":\"R\",\"dice\":10,\"sides\":10,\"mods\":{},\"results\":[{\"v\":5},{\"v\":1},{\"v\":2},{\"v\":8},{\"v\":7},{\"v\":4},{\"v\":6},{\"v\":8},{\"v\":6},{\"v\":2}]}],\"resultType\":\"sum\",\"total\":349}","origRoll":"300 + 10d10","playerid":"-MHg4cBoufgA6Qc3bt17","signature":"42a65fd86bce003a4117049e273fd2d0f5fdec22dbc836946b297afb19ed5beef3121b306d8d6ebfecc5977d550ef56221a6130ad45d7beb5aea1d1eb3e2320e","type":"rollresult","who":"setrofim"},"-MHgZ5bdGiHL1cwo0Rqn":{".priority":1600622980238.0,"avatar":"/users/avatar/3836445/30","content":"(starting gold)","playerid":"-MHg4cBoufgA6Qc3bt17","type":"general","who":"setrofim"},"-MHg_P4KnhN7_VuzCkOD":{".priority":1600623322108.0,"avatar":"/users/avatar/3836445/30","content":"  {{name=Keen Senses}} {{type=feat}} {{showchar=$[[0]]}} {{charname=Brice Callum}} {{abilitytype=Race}}  {{shortdesc=}} {{descflag=$[[1]]}}{{desc=Halflings receive a +2 racial bonus on Perception skill checks.}} {{shownotes=$[[2]]}} {{notes=}}","inlinerolls":[{"expression":"1","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"}],"total":1,"type":"V"},"signature":false},{"expression":"1","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"}],"total":1,"type":"V"},"signature":false},{"expression":"1","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"}],"total":1,"type":"V"},"signature":false}],"playerid":"-MHg4cBoufgA6Qc3bt17","rolltemplate":"pc","type":"general","who":"setrofim"},"-MHgaSDwgrfZWgCRuP5P":{".priority":1600623596495.0,"avatar":"/users/avatar/1004837/30","content":"  {{name=^{caster-level-check}}} {{type=save}} {{showchar=$[[0]]}} {{charname=Anthony Char}} {{casterclass=Cleric}} {{level=2}} {{roll=$[[1]]}}","inlinerolls":[{"expression":"1","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"}],"total":1,"type":"V"},"signature":false},{"expression":"1d20+2[MOD]+0[QUERY]","results":{"resultType":"sum","rolls":[{"dice":1,"results":[{"v":6}],"sides":20,"type":"R"},{"expr":"+2","type":"M"},{"text":"MOD","type":"L"},{"expr":"+0","type":"M"},{"text":"QUERY","type":"L"}],"total":8,"type":"V"},"rollid":"-MHgaSMbNfO3aZG42CIb","signature":"435842c33ed38dea0190ebd580ae08e055b1b4705a82079b9dd372ec603decbdbd22d6bd8e30d05d97695f4361d2de867cc70a3efc30d746a917e5b1dcb92a3c"}],"playerid":"-MHg4gg3Eaij4VeiKaZd","rolltemplate":"pc","type":"general","who":"Anthony R."},"-MHgkoYSbVQgUS_ldoSK":{".priority":1600626313592.0,"avatar":"/users/avatar/5436010/30","content":"  {{name=Weapon Finesse}} {{type=feat}} {{showchar=$[[0]]}} {{charname=Jess}} {{shortdesc=}} {{feattype=^{combat}}} {{prerequisites=}} {{benefits=With a light weapon, elven curve blade, Rapier, whip, or spiked chain made for a Creature of your size category, you may use your Dexterity modifier instead of your Strength modifier on attack rolls. If you carry a Shield, its armor check Penalty applies to your attack rolls.}} {{normal=}} {{special=}} {{descflag=$[[1]]}}{{desc=You are trained in using your agility in melee combat, as opposed to brute strength.}} {{shownotes=$[[2]]}} {{notes=}}","inlinerolls":[{"expression":"1","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"}],"total":1,"type":"V"},"signature":false},{"expression":"1","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"}],"total":1,"type":"V"},"signature":false},{"expression":"1","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"}],"total":1,"type":"V"},"signature":false}],"playerid":"-MHfzytbYjUHViyumQwk","rolltemplate":"pc","type":"general","who":"Misatos A. (GM)"},"-MHgxbjntEt1wfNeI2Hl":{".priority":1600629669535.0,"avatar":"/users/avatar/3836445/30","content":"  {{name=Rapier (small)}} {{type=attack}} {{showchar=$[[0]]}} {{charname=Brice Callum}} {{nonlethal=$[[1]]}} {{attack=1}} {{roll=$[[2]]}} {{critconfirm=$[[3]]}}{{atkvs=(Ranged vs AC)}}{{shownotes=$[[4]]}}{{notes=}} {{conditionsflag=$[[5]]}} {{conditions=}} {{conditionsnote= }}","inlinerolls":[{"expression":"1","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"}],"total":1,"type":"V"},"signature":false},{"expression":"1[Nonlethal]","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"},{"text":"Nonlethal","type":"L"}],"total":1,"type":"V"},"signature":false},{"expression":"1d20cs>18 + 7[Ranged] + 0[Ability] + 0[MOD] + 0[TEMP] + (0)[CONDITION] + 0[QUERY]","results":{"resultType":"sum","rolls":[{"dice":1,"mods":{"customCrit":[{"comp":">=","point":18}]},"results":[{"v":13}],"sides":20,"type":"R"},{"expr":"+7","type":"M"},{"text":"Ranged","type":"L"},{"expr":"+0","type":"M"},{"text":"Ability","type":"L"},{"expr":"+0","type":"M"},{"text":"MOD","type":"L"},{"expr":"+0","type":"M"},{"text":"TEMP","type":"L"},{"expr":"+(0)","type":"M"},{"text":"CONDITION","type":"L"},{"expr":"+0","type":"M"},{"text":"QUERY","type":"L"}],"total":20,"type":"V"},"rollid":"-MHgxbnX5CbiUnYCSOCU","signature":"a9bf3c97f18ab281173b0ae012dce36cb1f2047be4f4edc6908d34127a091d7b8ea7b6fdf0abd388e1a10f5e21aab4ae5665c2b49562df7bd45d92235d2f3e37"},{"expression":"1d20cs20 + 7[Ranged] + 0[Ability] + 0[MOD] + 0[TEMP] + (0)[CONDITION] + 0[QUERY] + 0[CRIT CONFIRM BONUS]","results":{"resultType":"sum","rolls":[{"dice":1,"mods":{"customCrit":[{"comp":"==","point":20}]},"results":[{"v":18}],"sides":20,"type":"R"},{"expr":"+7","type":"M"},{"text":"Ranged","type":"L"},{"expr":"+0","type":"M"},{"text":"Ability","type":"L"},{"expr":"+0","type":"M"},{"text":"MOD","type":"L"},{"expr":"+0","type":"M"},{"text":"TEMP","type":"L"},{"expr":"+(0)","type":"M"},{"text":"CONDITION","type":"L"},{"expr":"+0","type":"M"},{"text":"QUERY","type":"L"},{"expr":"+0","type":"M"},{"text":"CRIT CONFIRM BONUS","type":"L"}],"total":25,"type":"V"},"rollid":"-MHgxbnYDu4sxDAVQbkP","signature":"73b56e892d2f9996474b2c3341448d300169252afa8f7c247a8ebefedc8a05eb41ef970094ed3e499c775a998e27359e755c01fedae9f0e197acf84c890be970"},{"expression":"1","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"}],"total":1,"type":"V"},"signature":false},{"expression":"0","results":{"resultType":"M","rolls":[{"expr":0,"type":"M"}],"total":0,"type":"V"},"signature":false}],"playerid":"-MHg4cBoufgA6Qc3bt17","rolltemplate":"pc","type":"general","who":"setrofim"},"-MHgxl8V0IzwrzDwMCij":{".priority":1600629708049.0,"avatar":"/users/avatar/3836445/30","content":"  {{name=Rapier (small)}} {{type=attack}} {{showchar=$[[0]]}} {{charname=Brice Callum}} {{nonlethal=$[[1]]}} {{attack=1}} {{roll=$[[2]]}} {{critconfirm=$[[3]]}}{{atkvs=(BAB+DEX vs AC)}}{{shownotes=$[[4]]}}{{notes=}} {{conditionsflag=$[[5]]}} {{conditions=}} {{conditionsnote= }}","inlinerolls":[{"expression":"1","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"}],"total":1,"type":"V"},"signature":false},{"expression":"1[Nonlethal]","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"},{"text":"Nonlethal","type":"L"}],"total":1,"type":"V"},"signature":false},{"expression":"1d20cs>18 + 2[BAB] + 4[DEX] + 0[MOD] + 0[TEMP] + (0)[CONDITION] + 0[QUERY]","results":{"resultType":"sum","rolls":[{"dice":1,"mods":{"customCrit":[{"comp":">=","point":18}]},"results":[{"v":11}],"sides":20,"type":"R"},{"expr":"+2","type":"M"},{"text":"BAB","type":"L"},{"expr":"+4","type":"M"},{"text":"DEX","type":"L"},{"expr":"+0","type":"M"},{"text":"MOD","type":"L"},{"expr":"+0","type":"M"},{"text":"TEMP","type":"L"},{"expr":"+(0)","type":"M"},{"text":"CONDITION","type":"L"},{"expr":"+0","type":"M"},{"text":"QUERY","type":"L"}],"total":17,"type":"V"},"rollid":"-MHgxlAVKD4AFI4KwqdB","signature":"52a8c8f4c696faa968316f373e8961c026f2caa5afd55aeebf73a28ebb25572e579957547013e590e87a43cbc03d903fc17d938b63536ae0e4f206cf431f0f5b"},{"expression":"1d20cs20 + 2[BAB] + 4[DEX] + 0[MOD] + 0[TEMP] + (0)[CONDITION] + 0[QUERY] + 0[CRIT CONFIRM BONUS]","results":{"resultType":"sum","rolls":[{"dice":1,"mods":{"customCrit":[{"comp":"==","point":20}]},"results":[{"v":20}],"sides":20,"type":"R"},{"expr":"+2","type":"M"},{"text":"BAB","type":"L"},{"expr":"+4","type":"M"},{"text":"DEX","type":"L"},{"expr":"+0","type":"M"},{"text":"MOD","type":"L"},{"expr":"+0","type":"M"},{"text":"TEMP","type":"L"},{"expr":"+(0)","type":"M"},{"text":"CONDITION","type":"L"},{"expr":"+0","type":"M"},{"text":"QUERY","type":"L"},{"expr":"+0","type":"M"},{"text":"CRIT CONFIRM BONUS","type":"L"}],"total":26,"type":"V"},"rollid":"-MHgxlAWEVgjXt8nc53q","signature":"6cc69bc0796c3c38fe5079de3a4d8490e9e9abbab73801a0d5ba12744f6a1d0ec581bf685ec817690bea18b27d0cd7373c1b771e84508deb62348aae7f0a592e"},{"expression":"1","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"}],"total":1,"type":"V"},"signature":false},{"expression":"0","results":{"resultType":"M","rolls":[{"expr":0,"type":"M"}],"total":0,"type":"V"},"signature":false}],"playerid":"-MHg4cBoufgA6Qc3bt17","rolltemplate":"pc","type":"general","who":"setrofim"},"-MHh463LPQI8CDofy7XT":{".priority":1600631632642.0,"avatar":"/users/avatar/5436010/30","content":"{\"type\":\"V\",\"rolls\":[{\"type\":\"R\",\"dice\":8,\"sides\":8,\"mods\":{},\"results\":[{\"v\":8},{\"v\":2},{\"v\":8},{\"v\":8},{\"v\":2},{\"v\":8},{\"v\":8},{\"v\":7}]}],\"resultType\":\"sum\",\"total\":51}","origRoll":"8d8","playerid":"-MHfzytbYjUHViyumQwk","signature":"a8ee5b47ad6cc77331214c5a14f1ba3b2ab1d8ef010c7380a216764299122a9ff7bcba627628593e0d97942d0577b72068dc8cb985f12f794c461ec8157796f6","type":"gmrollresult","who":"Misatos A. (GM)"},"-MHrjigMgjeGriOcug8f":{".priority":1600810576799.0,"avatar":"/users/avatar/5436010/30","content":"  {{name=^{strength}}} {{type=ability}} {{showchar=$[[0]]}} {{charname=Bodyguard}} {{roll=$[[1]]}}","inlinerolls":[{"expression":"1","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"}],"total":1,"type":"V"},"signature":false},{"expression":"1d20+0[MOD]+0[QUERY]","results":{"resultType":"sum","rolls":[{"dice":1,"results":[{"v":7}],"sides":20,"type":"R"},{"expr":"+0","type":"M"},{"text":"MOD","type":"L"},{"expr":"+0","type":"M"},{"text":"QUERY","type":"L"}],"total":7,"type":"V"},"rollid":"-MHrjiabnbkPE9ahXixx","signature":"3eceae5bf729c67e1d386ba82abc25687e54307f6abe520d6af0058a8dbc0185be76565e951b3d0a48f2244030ff52ac6f3a280729d4f4e7d7309cc7ed917775"}],"playerid":"-MHfzytbYjUHViyumQwk","rolltemplate":"npc","type":"general","who":"Misatos A. (GM)"},"-MHroKVZAIKEf5vhKox4":{".priority":1600811784716.0,"avatar":"/users/avatar/5436010/30","content":"{\"type\":\"V\",\"rolls\":[{\"type\":\"R\",\"dice\":1,\"sides\":12,\"mods\":{},\"results\":[{\"v\":1}]}],\"resultType\":\"sum\",\"total\":1}","origRoll":"1d12","playerid":"-MHfzytbYjUHViyumQwk","signature":"13f0d1eef1f340c9bcb776343d546a4b3e0a64205fbfa2d0e9edbabde972a9c02e6fd10c5175c6b3225f7b9e53077e723c1ec59a6cfc32d70b1b088c3f419356","type":"gmrollresult","who":"Misatos A. (GM)"},"-MHroM54aqZn1vbJCUBI":{".priority":1600811791132.0,"avatar":"/users/avatar/5436010/30","content":"{\"type\":\"V\",\"rolls\":[{\"type\":\"R\",\"dice\":1,\"sides\":12,\"mods\":{},\"results\":[{\"v\":11}]}],\"resultType\":\"sum\",\"total\":11}","origRoll":"1d12","playerid":"-MHfzytbYjUHViyumQwk","signature":"56d0f02f8461feb73e87334f9bd3e1b3eb195df58a6bf33421b5eae6d900676fc2e89f4194aab2f7c0ffc20569c5933d152a5afa44a70413af443325fb060978","type":"gmrollresult","who":"Misatos A. (GM)"},"-MHrvasCxf2-VfASXIB8":{".priority":1600813690500.0,"avatar":"/users/avatar/5436010/30","content":"  {{name=^{stealth}}} {{type=skill}} {{showchar=$[[0]]}} {{charname=Eneg}} {{roll=$[[1]]}} {{shownotes=$[[2]]}} {{notes=}} {{conditionsflag=$[[3]]}} {{conditions= }} {{conditionsnote=}}","inlinerolls":[{"expression":"1","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"}],"total":1,"type":"V"},"signature":false},{"expression":"1d20+6[MOD]+(0)[CONDITION]+0[QUERY]","results":{"resultType":"sum","rolls":[{"dice":1,"results":[{"v":5}],"sides":20,"type":"R"},{"expr":"+6","type":"M"},{"text":"MOD","type":"L"},{"expr":"+(0)","type":"M"},{"text":"CONDITION","type":"L"},{"expr":"+0","type":"M"},{"text":"QUERY","type":"L"}],"total":11,"type":"V"},"rollid":"-MHrvambl1c1ikT_iDD3","signature":"95dbab7338bda52a74c2a34cdb72744281d0d5a7355a6abc9e7b57649131a33fbf801a7cb41cd1402cfd18f2c92db2a4c25b6b0865ead40b60f96ff71c66e91e"},{"expression":"1","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"}],"total":1,"type":"V"},"signature":false},{"expression":"0","results":{"resultType":"M","rolls":[{"expr":0,"type":"M"}],"total":0,"type":"V"},"signature":false}],"playerid":"-MHfzytbYjUHViyumQwk","rolltemplate":"pc","type":"general","who":"Misatos A. (GM)"},"-MI0T-4eO5JLd2WHghs0":{".priority":1600973702046.0,"avatar":"/users/avatar/3836445/30","content":"https://www.d20pfsrd.com/alignment-description/description/","playerid":"-MHg4cBoufgA6Qc3bt17","type":"general","who":"setrofim"},"-MI0TgZsaf_gXi4hphRy":{".priority":1600973888605.0,"avatar":"/users/avatar/7349062/30","content":"{\"type\":\"V\",\"rolls\":[{\"type\":\"R\",\"dice\":2,\"sides\":10,\"mods\":{},\"results\":[{\"v\":7},{\"v\":7}]}],\"resultType\":\"sum\",\"total\":14}","origRoll":"2d10","playerid":"-MI-lFUEhYM3FdupHoVE","signature":"ab264bc6d9fe91ac8001e76340717ce01377ce2e5dda310a17129c04ff9c25ad3d09c46e20c0fb4d2f01cfa9dc167d2fd1b97df0de27237f0ca0a9f44db214e3","type":"rollresult","who":"Boarboara"},"-MI0V2W7krYZGlSCy1pp":{".priority":1600974244168.0,"avatar":"/users/avatar/7349062/30","content":"{\"type\":\"V\",\"rolls\":[{\"type\":\"R\",\"dice\":1,\"sides\":6,\"mods\":{},\"results\":[{\"v\":5}]}],\"resultType\":\"sum\",\"total\":5}","origRoll":"1d6","playerid":"-MI-lFUEhYM3FdupHoVE","signature":"9981244a779571097357c54c277a0b56dfe6195d7b8e1ce1eeb4618284c792825854d44fd004ff6fd62ce376bf64eae7201c0c9ec2822fa1b42453567d509111","type":"rollresult","who":"Boarboara"},"-MI0V_wJ57qmqHmgiMX1":{".priority":1600974381550.0,"avatar":"/users/avatar/7349062/30","content":"{\"type\":\"V\",\"rolls\":[{\"type\":\"M\",\"expr\":\"300+\"},{\"type\":\"R\",\"dice\":1,\"sides\":10,\"mods\":{},\"results\":[{\"v\":8}]},{\"type\":\"M\",\"expr\":\"*10\"}],\"resultType\":\"sum\",\"total\":380}","origRoll":"300+1d10*10","playerid":"-MI-lFUEhYM3FdupHoVE","signature":"3d30ac15b4d785143c54f792b90006009987d95798bbf71287a816280df956a7cca2b4a8bc94ffd741d15b50fdc745005b93171112cb493cd776c10432737113","type":"rollresult","who":"Boarboara"},"-MI0Vc8CgqxbSVEllAtP":{".priority":1600974389349.0,"avatar":"/users/avatar/1004837/30","content":"{\"type\":\"V\",\"rolls\":[{\"type\":\"M\",\"expr\":\"300+(\"},{\"type\":\"R\",\"dice\":1,\"sides\":10,\"mods\":{},\"results\":[{\"v\":2}]},{\"type\":\"M\",\"expr\":\"*10)\"}],\"resultType\":\"sum\",\"total\":320}","origRoll":"300 + (1d10*10)","playerid":"-MHg4gg3Eaij4VeiKaZd","signature":"6b9c2f50e7ffdbc31e031ece8b84d04bd31601a487cb71168c104df3db46c355108af37ff806a917db4dbb77950c6e986ab16c1f74fbda6f00ff626061a2fe00","type":"rollresult","who":"Anthony R."},"-MI0ZLR58SX7VJqH77x-":{".priority":1600975366449.0,"avatar":"/users/avatar/3836445/30","content":"https://www.d20pfsrd.com/magic/spell-lists-and-domains/spell-lists-bard","playerid":"-MHg4cBoufgA6Qc3bt17","type":"general","who":"setrofim"},"-MI0_PdGt67s9k31Eotm":{".priority":1600975645821.0,"avatar":"/users/avatar/3836445/30","content":"https://www.d20pfsrd.com/classes/core-classes/bard","playerid":"-MHg4cBoufgA6Qc3bt17","type":"general","who":"setrofim"},"-MI0gnJjMa24OLONXjdR":{".priority":1600977581915.0,"avatar":"/users/avatar/3836445/30","content":"https://www.d20pfsrd.com/equipmenT/goods-and-services/hunting-camping-survival-gear/#TOC-Waterskin","playerid":"-MHg4cBoufgA6Qc3bt17","type":"general","who":"setrofim"},"-MI0h45JWRNNVbA6QXcW":{".priority":1600977654718.0,"avatar":"/users/avatar/3836445/30","content":"https://www.d20pfsrd.com/equipmenT/goods-and-services/containers-bags-boxes-more/#TOC-Waterskin","playerid":"-MHg4cBoufgA6Qc3bt17","type":"general","who":"setrofim"},"-MI0j23-c-LujuZg-8Ss":{".priority":1600978170671.0,"avatar":"/users/avatar/3836445/30","content":"https://i.pinimg.com/originals/e7/b0/12/e7b012c4164ed47489044204cc27f64d.jpg","playerid":"-MHg4cBoufgA6Qc3bt17","type":"general","who":"setrofim"},"-MI6VZA9YTK-sAkLBLX-":{".priority":1601075037002.0,"avatar":"/users/avatar/5436010/30","content":"  {{name=^{strength}}} {{type=ability}} {{showchar=$[[0]]}} {{charname=Jess}} {{roll=$[[1]]}} {{shownotes=$[[2]]}} {{notes=}} {{conditionsflag=$[[3]]}} {{conditions= }}","inlinerolls":[{"expression":"1","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"}],"total":1,"type":"V"},"signature":false},{"expression":"1d20+-1[MOD]+(0)[CONDITION]+0[QUERY]","results":{"resultType":"sum","rolls":[{"dice":1,"results":[{"v":2}],"sides":20,"type":"R"},{"expr":"+-1","type":"M"},{"text":"MOD","type":"L"},{"expr":"+(0)","type":"M"},{"text":"CONDITION","type":"L"},{"expr":"+0","type":"M"},{"text":"QUERY","type":"L"}],"total":1,"type":"V"},"rollid":"-MI6VZ4thT9E47g4TgMQ","signature":"4bfaf336afe0076d887d7a1e5da74d5eea8d94498f28a4b2b090d177d4831ed808687140390fa81bbbfc779a448645620751f3402dae60e9e0537d4e036cb164"},{"expression":"1","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"}],"total":1,"type":"V"},"signature":false},{"expression":"0+0","results":{"resultType":"M","rolls":[{"expr":"0+0","type":"M"}],"total":0,"type":"V"},"signature":false}],"playerid":"-MHfzytbYjUHViyumQwk","rolltemplate":"pc","target":"gm","target_name":"GM","type":"whisper","who":"Misatos A. (GM)"},"-MI6VlyhiOgCFIgUR6Zt":{".priority":1601075093573.0,"avatar":"/users/avatar/5436010/30","content":"  {{name=Rapier}} {{type=attackdamage}} {{showchar=$[[0]]}} {{charname=Jess}} {{nonlethal=$[[1]]}} {{attack=1}}{{roll=$[[2]]}} {{critconfirm=$[[3]]}}{{atkvs=(Melee+DEX vs AC)}}{{roll1=$[[4]]}} {{critconfirm1=$[[5]]}}{{shownotes=$[[6]]}}{{notes=}}{{rolldmg1=$[[7]]}} {{rolldmg1type=Piercing}}{{rolldmg1crit=$[[8]]}}{{roll1dmg1=$[[9]]}} {{roll1dmg1type=Piercing}}{{roll1dmg1crit=$[[10]]}} {{conditionsflag=$[[11]]}} {{conditions= }} {{conditionsnote= }}","inlinerolls":[{"expression":"1","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"}],"total":1,"type":"V"},"signature":false},{"expression":"1[Nonlethal]","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"},{"text":"Nonlethal","type":"L"}],"total":1,"type":"V"},"signature":false},{"expression":"1d20cs>18 + 6[Melee] + 5[DEX] + 0[MOD] + 0[TEMP] + (0)[CONDITION] + 0[QUERY]","results":{"resultType":"sum","rolls":[{"dice":1,"mods":{"customCrit":[{"comp":">=","point":18}]},"results":[{"v":14}],"sides":20,"type":"R"},{"expr":"+6","type":"M"},{"text":"Melee","type":"L"},{"expr":"+5","type":"M"},{"text":"DEX","type":"L"},{"expr":"+0","type":"M"},{"text":"MOD","type":"L"},{"expr":"+0","type":"M"},{"text":"TEMP","type":"L"},{"expr":"+(0)","type":"M"},{"text":"CONDITION","type":"L"},{"expr":"+0","type":"M"},{"text":"QUERY","type":"L"}],"total":25,"type":"V"},"rollid":"-MI6VlqLo68CZGEgjs8h","signature":"4607328149371a789e5446e74982e9490c87bf80ed7fd4e7b07e6585d896961a3f1ea902acf1689c8153dee73f0d51f4e861429380992db3b1aae1907494833d"},{"expression":"1d20cs20 + 6[Melee] + 5[DEX] + 0[MOD] + 0[TEMP] + (0)[CONDITION] + 0[QUERY] + 0[CRIT CONFIRM BONUS]","results":{"resultType":"sum","rolls":[{"dice":1,"mods":{"customCrit":[{"comp":"==","point":20}]},"results":[{"v":3}],"sides":20,"type":"R"},{"expr":"+6","type":"M"},{"text":"Melee","type":"L"},{"expr":"+5","type":"M"},{"text":"DEX","type":"L"},{"expr":"+0","type":"M"},{"text":"MOD","type":"L"},{"expr":"+0","type":"M"},{"text":"TEMP","type":"L"},{"expr":"+(0)","type":"M"},{"text":"CONDITION","type":"L"},{"expr":"+0","type":"M"},{"text":"QUERY","type":"L"},{"expr":"+0","type":"M"},{"text":"CRIT CONFIRM BONUS","type":"L"}],"total":14,"type":"V"},"rollid":"-MI6VlqMDe9yLJU431hT","signature":"5e38f32f7ef981f99dcb9be634c3f71efb0edba14a6edb6729268d520d4866d9d1297ccc925e9d2bde6f395789ce33af5358ec1fee90cbe4d0d4450022319087"},{"expression":"1d20cs>18 + 1[Melee] + 5[DEX] + 0[MOD] + 0[TEMP] + (0)[CONDITION] + 0[QUERY]","results":{"resultType":"sum","rolls":[{"dice":1,"mods":{"customCrit":[{"comp":">=","point":18}]},"results":[{"v":16}],"sides":20,"type":"R"},{"expr":"+1","type":"M"},{"text":"Melee","type":"L"},{"expr":"+5","type":"M"},{"text":"DEX","type":"L"},{"expr":"+0","type":"M"},{"text":"MOD","type":"L"},{"expr":"+0","type":"M"},{"text":"TEMP","type":"L"},{"expr":"+(0)","type":"M"},{"text":"CONDITION","type":"L"},{"expr":"+0","type":"M"},{"text":"QUERY","type":"L"}],"total":22,"type":"V"},"rollid":"-MI6VlqNO_sTb2jSfMLS","signature":"a73b2baf52ae77bdb4f01f26420bd9b81042cfa33bf432fe72a68c58025f591960e662c882a04826a08ac1b4ab702614830932dc6a5fe56a272350d3fb373c52"},{"expression":"1d20cs20 + 1[Melee] + 5[DEX] + 0[MOD] + 0[TEMP] + (0)[CONDITION] + 0[QUERY] + 0[CRIT CONFIRM BONUS]","results":{"resultType":"sum","rolls":[{"dice":1,"mods":{"customCrit":[{"comp":"==","point":20}]},"results":[{"v":20}],"sides":20,"type":"R"},{"expr":"+1","type":"M"},{"text":"Melee","type":"L"},{"expr":"+5","type":"M"},{"text":"DEX","type":"L"},{"expr":"+0","type":"M"},{"text":"MOD","type":"L"},{"expr":"+0","type":"M"},{"text":"TEMP","type":"L"},{"expr":"+(0)","type":"M"},{"text":"CONDITION","type":"L"},{"expr":"+0","type":"M"},{"text":"QUERY","type":"L"},{"expr":"+0","type":"M"},{"text":"CRIT CONFIRM BONUS","type":"L"}],"total":26,"type":"V"},"rollid":"-MI6VlqO9cMW9BD3WyAy","signature":"0d469f19669931c046de1140bff3af9d378bc2f83c7e503427db6d71fac01e2072490be180327a4155f352d1ebd13b11a259e102bc81132b64cf53b8cf319432"},{"expression":"1","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"}],"total":1,"type":"V"},"signature":false},{"expression":"1d4+-1[STR] + 0[MOD] + 0[TEMP] + 0[QUERY]","results":{"resultType":"sum","rolls":[{"dice":1,"results":[{"v":3}],"sides":4,"type":"R"},{"expr":"+-1","type":"M"},{"text":"STR","type":"L"},{"expr":"+0","type":"M"},{"text":"MOD","type":"L"},{"expr":"+0","type":"M"},{"text":"TEMP","type":"L"},{"expr":"+0","type":"M"},{"text":"QUERY","type":"L"}],"total":2,"type":"V"},"rollid":"-MI6VlqQv7sBBiTxHScN","signature":"2dae7c759d589c9292e1b82805979fd0d1624724cebaaec3163b19941cad0a65d1e12620e48c3695e78e960d622baaa9265610dcb70e0e95cf79255fd23f0872"},{"expression":"((1d4+1d4) + (-1[STR] + 0[MOD] + 0[TEMP] + 0[QUERY]) * 2)","results":{"resultType":"sum","rolls":[{"expr":"((","type":"M"},{"dice":1,"results":[{"v":4}],"sides":4,"type":"R"},{"expr":"+","type":"M"},{"dice":1,"results":[{"v":2}],"sides":4,"type":"R"},{"expr":")+(-1","type":"M"},{"text":"STR","type":"L"},{"expr":"+0","type":"M"},{"text":"MOD","type":"L"},{"expr":"+0","type":"M"},{"text":"TEMP","type":"L"},{"expr":"+0","type":"M"},{"text":"QUERY","type":"L"},{"expr":")*2)","type":"M"}],"total":4,"type":"V"},"rollid":"-MI6VlqS4YtsPdRTFeg-","signature":"4b8c38addac90384b3a2be4541b09ff70bb7f42c6c65c89c1144081806ecc46294fa38fd158eec0452144fd8a5bc4700acb3e8cf500d4d1d9ffcd6804f6cd3ff"},{"expression":"1d4+-1[STR] + 0[MOD] + 0[TEMP] + 0[QUERY]","results":{"resultType":"sum","rolls":[{"dice":1,"results":[{"v":4}],"sides":4,"type":"R"},{"expr":"+-1","type":"M"},{"text":"STR","type":"L"},{"expr":"+0","type":"M"},{"text":"MOD","type":"L"},{"expr":"+0","type":"M"},{"text":"TEMP","type":"L"},{"expr":"+0","type":"M"},{"text":"QUERY","type":"L"}],"total":3,"type":"V"},"rollid":"-MI6VlqT5gSuFWCzcU4p","signature":"618b8d9ad0ce9ce3ce437e1570a214f3c4b0582fb62b6f47510e7da1d76b46bd343e9a6aabc0da06bceb61597e3c3180f783e53fa83a0263bfd7681974251e65"},{"expression":"((1d4+1d4) + (-1[STR] + 0[MOD] + 0[TEMP] + 0[QUERY]) * 2)","results":{"resultType":"sum","rolls":[{"expr":"((","type":"M"},{"dice":1,"results":[{"v":4}],"sides":4,"type":"R"},{"expr":"+","type":"M"},{"dice":1,"results":[{"v":4}],"sides":4,"type":"R"},{"expr":")+(-1","type":"M"},{"text":"STR","type":"L"},{"expr":"+0","type":"M"},{"text":"MOD","type":"L"},{"expr":"+0","type":"M"},{"text":"TEMP","type":"L"},{"expr":"+0","type":"M"},{"text":"QUERY","type":"L"},{"expr":")*2)","type":"M"}],"total":6,"type":"V"},"rollid":"-MI6VlqVYHIv-l7dSmJ-","signature":"3d31c50f91f5091daaaae39deb11d956a6eb4308bf169f7e955aa8db784dbc4dc8c18aa90db5f8e5995c6491b404b06aa6764776796b4f919b59a4f4e40b3a39"},{"expression":"0","results":{"resultType":"M","rolls":[{"expr":0,"type":"M"}],"total":0,"type":"V"},"signature":false}],"playerid":"-MHfzytbYjUHViyumQwk","rolltemplate":"pc","target":"gm","target_name":"GM","type":"whisper","who":"Misatos A. (GM)"},"-MI6WF5Qr03aI67SQZwS":{".priority":1601075216916.0,"avatar":"/users/avatar/5436010/30","content":"  {{smallname=Dagger}} {{type=damage}} {{showchar=$[[0]]}} {{charname=Jess}} {{nonlethal=$[[1]]}} {{damage=1}} {{dmg1flag=1}} {{dmg1=$[[2]]}} {{dmg1type=Piercing or Slashing}}{{dmg1crit=$[[3]]}} {{conditionsnote=}}","inlinerolls":[{"expression":"1","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"}],"total":1,"type":"V"},"signature":false},{"expression":"1[Nonlethal]","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"},{"text":"Nonlethal","type":"L"}],"total":1,"type":"V"},"signature":false},{"expression":"1d3+-1[STR] + 0[MOD] + 0[TEMP] + 0[QUERY]","results":{"resultType":"sum","rolls":[{"dice":1,"results":[{"v":2}],"sides":3,"type":"R"},{"expr":"+-1","type":"M"},{"text":"STR","type":"L"},{"expr":"+0","type":"M"},{"text":"MOD","type":"L"},{"expr":"+0","type":"M"},{"text":"TEMP","type":"L"},{"expr":"+0","type":"M"},{"text":"QUERY","type":"L"}],"total":1,"type":"V"},"rollid":"-MI6WF0gFbOt7DJhChU0","signature":"64ae3f346e27838111c7b34861e2b1546a8a809345b56f6bc052285d43ca5d809f5d9acffde741757b2a66cd65f0052e68f6a51380087b9b243c871fdd94470f"},{"expression":"((1d3+1d3) + (-1[STR] + 0[MOD] + 0[TEMP] + 0[QUERY]) * 2)","results":{"resultType":"sum","rolls":[{"expr":"((","type":"M"},{"dice":1,"results":[{"v":2}],"sides":3,"type":"R"},{"expr":"+","type":"M"},{"dice":1,"results":[{"v":3}],"sides":3,"type":"R"},{"expr":")+(-1","type":"M"},{"text":"STR","type":"L"},{"expr":"+0","type":"M"},{"text":"MOD","type":"L"},{"expr":"+0","type":"M"},{"text":"TEMP","type":"L"},{"expr":"+0","type":"M"},{"text":"QUERY","type":"L"},{"expr":")*2)","type":"M"}],"total":3,"type":"V"},"rollid":"-MI6WF0i2E7W2qRGb9OU","signature":"2b6e37da82ab9cbf9065e89cc5e4e0ac50f9ae7ec49e50b59bacb0cd437e6fab5d2bdb5fb990e0d6887a21c880f4f6bd094bf415278cfaefd87efaf4b2493986"}],"playerid":"-MHfzytbYjUHViyumQwk","rolltemplate":"pc","target":"gm","target_name":"GM","type":"whisper","who":"Misatos A. (GM)"},"-MI6WRHuidzAL_BZjql-":{".priority":1601075266866.0,"avatar":"/users/avatar/5436010/30","content":"  {{smallname=Sneak Attack}} {{type=damage}} {{showchar=$[[0]]}} {{charname=Jess}} {{nonlethal=$[[1]]}} {{damage=1}} {{dmg1flag=1}} {{dmg1=$[[2]]}} {{dmg1type=}}{{dmg1crit=$[[3]]}}{{shownotes=$[[4]]}}{{notes=}} {{conditionsnote=}}","inlinerolls":[{"expression":"1","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"}],"total":1,"type":"V"},"signature":false},{"expression":"1[Nonlethal]","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"},{"text":"Nonlethal","type":"L"}],"total":1,"type":"V"},"signature":false},{"expression":"5d6+0[Ability] + 0[MOD] + 0[TEMP] + 0[QUERY]","results":{"resultType":"sum","rolls":[{"dice":5,"results":[{"v":2},{"v":1},{"v":4},{"v":5},{"v":2}],"sides":6,"type":"R"},{"expr":"+0","type":"M"},{"text":"Ability","type":"L"},{"expr":"+0","type":"M"},{"text":"MOD","type":"L"},{"expr":"+0","type":"M"},{"text":"TEMP","type":"L"},{"expr":"+0","type":"M"},{"text":"QUERY","type":"L"}],"total":14,"type":"V"},"rollid":"-MI6WRD_D0dqaq4RtkiO","signature":"36d09f32253512f13e4ef6c17cf2e18fe84c1898905f8032b44ab4998fa74691d934e75f2076be0dc5bcac94c7fa4c44b96bdea09128640e0fd39390afc32551"},{"expression":"((5d6+5d6) + (0[Ability] + 0[MOD] + 0[TEMP] + 0[QUERY]) * 2)","results":{"resultType":"sum","rolls":[{"expr":"((","type":"M"},{"dice":5,"results":[{"v":2},{"v":3},{"v":5},{"v":1},{"v":2}],"sides":6,"type":"R"},{"expr":"+","type":"M"},{"dice":5,"results":[{"v":3},{"v":1},{"v":1},{"v":4},{"v":6}],"sides":6,"type":"R"},{"expr":")+(0","type":"M"},{"text":"Ability","type":"L"},{"expr":"+0","type":"M"},{"text":"MOD","type":"L"},{"expr":"+0","type":"M"},{"text":"TEMP","type":"L"},{"expr":"+0","type":"M"},{"text":"QUERY","type":"L"},{"expr":")*2)","type":"M"}],"total":28,"type":"V"},"rollid":"-MI6WRDbbk3yYv9yGhNn","signature":"37e18511ecbf38065c29aa660075176de59495ce1fff7ab99413d092c0ea8e6b4445404ae186248424024926f0f6f9ad45d36718cf28f153b5f06ff3a599b315"},{"expression":"1","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"}],"total":1,"type":"V"},"signature":false}],"playerid":"-MHfzytbYjUHViyumQwk","rolltemplate":"pc","target":"gm","target_name":"GM","type":"whisper","who":"Misatos A. (GM)"},"-MI6WhkUhban9DPxwQn3":{".priority":1601075338408.0,"avatar":"/users/avatar/5436010/30","content":"  {{name=Sap}} {{type=attackdamage}} {{showchar=$[[0]]}} {{charname=Jess}} {{nonlethal=$[[1]]}} {{attack=1}}{{roll=$[[2]]}} {{critconfirm=$[[3]]}}{{atkvs=(Melee+DEX vs AC)}}{{roll1=$[[4]]}} {{critconfirm1=$[[5]]}}{{shownotes=$[[6]]}}{{notes=Nonlethal}}{{rolldmg1=$[[7]]}} {{rolldmg1type=Bludgeoning}}{{rolldmg1crit=$[[8]]}}{{roll1dmg1=$[[9]]}} {{roll1dmg1type=Bludgeoning}}{{roll1dmg1crit=$[[10]]}}{{dmg2name=Damage2}}{{rolldmg2=$[[11]]}} {{rolldmg2type=Sneak attack}}{{rolldmg2crit=$[[12]]}}{{roll1dmg2=$[[13]]}} {{roll1dmg2type=Sneak attack}}{{roll1dmg2crit=$[[14]]}} {{conditionsflag=$[[15]]}} {{conditions= }} {{conditionsnote= }}","inlinerolls":[{"expression":"1","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"}],"total":1,"type":"V"},"signature":false},{"expression":"1[Nonlethal]","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"},{"text":"Nonlethal","type":"L"}],"total":1,"type":"V"},"signature":false},{"expression":"1d20cs>20 + 6[Melee] + 5[DEX] + 0[MOD] + 0[TEMP] + (0)[CONDITION] + 0[QUERY]","results":{"resultType":"sum","rolls":[{"dice":1,"mods":{"customCrit":[{"comp":">=","point":20}]},"results":[{"v":16}],"sides":20,"type":"R"},{"expr":"+6","type":"M"},{"text":"Melee","type":"L"},{"expr":"+5","type":"M"},{"text":"DEX","type":"L"},{"expr":"+0","type":"M"},{"text":"MOD","type":"L"},{"expr":"+0","type":"M"},{"text":"TEMP","type":"L"},{"expr":"+(0)","type":"M"},{"text":"CONDITION","type":"L"},{"expr":"+0","type":"M"},{"text":"QUERY","type":"L"}],"total":27,"type":"V"},"rollid":"-MI6WhbjxV2GVzpPiOTh","signature":"25475e9ce24e37ca6401696639ec99ab39b5af12088495de43632a7af492b1f4be16bb507d79d7e3c66b6fd05468b54ea42b9e6369aeeb30e4add44065377974"},{"expression":"1d20cs20 + 6[Melee] + 5[DEX] + 0[MOD] + 0[TEMP] + (0)[CONDITION] + 0[QUERY] + 0[CRIT CONFIRM BONUS]","results":{"resultType":"sum","rolls":[{"dice":1,"mods":{"customCrit":[{"comp":"==","point":20}]},"results":[{"v":8}],"sides":20,"type":"R"},{"expr":"+6","type":"M"},{"text":"Melee","type":"L"},{"expr":"+5","type":"M"},{"text":"DEX","type":"L"},{"expr":"+0","type":"M"},{"text":"MOD","type":"L"},{"expr":"+0","type":"M"},{"text":"TEMP","type":"L"},{"expr":"+(0)","type":"M"},{"text":"CONDITION","type":"L"},{"expr":"+0","type":"M"},{"text":"QUERY","type":"L"},{"expr":"+0","type":"M"},{"text":"CRIT CONFIRM BONUS","type":"L"}],"total":19,"type":"V"},"rollid":"-MI6Whbk6r_jFkRTSAPE","signature":"3d39f5ba90cdfee36235b001ee6a42dd557a6bc76b6fa95acc0f31f6a1d9c3cc76d55e089091d3ad9e91c58949f331eb0f17bfee00a768fb16ac271c5d0c3119"},{"expression":"1d20cs>20 + 1[Melee] + 5[DEX] + 0[MOD] + 0[TEMP] + (0)[CONDITION] + 0[QUERY]","results":{"resultType":"sum","rolls":[{"dice":1,"mods":{"customCrit":[{"comp":">=","point":20}]},"results":[{"v":7}],"sides":20,"type":"R"},{"expr":"+1","type":"M"},{"text":"Melee","type":"L"},{"expr":"+5","type":"M"},{"text":"DEX","type":"L"},{"expr":"+0","type":"M"},{"text":"MOD","type":"L"},{"expr":"+0","type":"M"},{"text":"TEMP","type":"L"},{"expr":"+(0)","type":"M"},{"text":"CONDITION","type":"L"},{"expr":"+0","type":"M"},{"text":"QUERY","type":"L"}],"total":13,"type":"V"},"rollid":"-MI6Whbk6r_jFkRTSAPF","signature":"12a33b188b900b4b0f65d0615204cb7e49ba7c09eae60928e649577899eb6e12fab6d8f5be1bdd03b97730308daac2041b020f2802deecde88b0b60b7128aff6"},{"expression":"1d20cs20 + 1[Melee] + 5[DEX] + 0[MOD] + 0[TEMP] + (0)[CONDITION] + 0[QUERY] + 0[CRIT CONFIRM BONUS]","results":{"resultType":"sum","rolls":[{"dice":1,"mods":{"customCrit":[{"comp":"==","point":20}]},"results":[{"v":10}],"sides":20,"type":"R"},{"expr":"+1","type":"M"},{"text":"Melee","type":"L"},{"expr":"+5","type":"M"},{"text":"DEX","type":"L"},{"expr":"+0","type":"M"},{"text":"MOD","type":"L"},{"expr":"+0","type":"M"},{"text":"TEMP","type":"L"},{"expr":"+(0)","type":"M"},{"text":"CONDITION","type":"L"},{"expr":"+0","type":"M"},{"text":"QUERY","type":"L"},{"expr":"+0","type":"M"},{"text":"CRIT CONFIRM BONUS","type":"L"}],"total":16,"type":"V"},"rollid":"-MI6Whbmzg-NIGgPvIvm","signature":"90f881c109e96a08b310b9fc8a0f4ff4f1e710aea3c79f7c54ace7be6f42903a2d2e92d190d1dd5bbce6b507c3b9c801a8b7fd57c84c4a6dad14e5fc242529f4"},{"expression":"1","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"}],"total":1,"type":"V"},"signature":false},{"expression":"1d4+-1[STR] + 0[MOD] + 0[TEMP] + 0[QUERY]","results":{"resultType":"sum","rolls":[{"dice":1,"results":[{"v":4}],"sides":4,"type":"R"},{"expr":"+-1","type":"M"},{"text":"STR","type":"L"},{"expr":"+0","type":"M"},{"text":"MOD","type":"L"},{"expr":"+0","type":"M"},{"text":"TEMP","type":"L"},{"expr":"+0","type":"M"},{"text":"QUERY","type":"L"}],"total":3,"type":"V"},"rollid":"-MI6Whbmzg-NIGgPvIvn","signature":"89c85daffdd4b09dee757aec27932e08bc05b0c7144f9ef1daf338422d0632b7f68f1683a1b532c45534930b64d0d2e9a15d63cd3dab8dab00432371d176783a"},{"expression":"((1d4+1d4) + (-1[STR] + 0[MOD] + 0[TEMP] + 0[QUERY]) * 2)","results":{"resultType":"sum","rolls":[{"expr":"((","type":"M"},{"dice":1,"results":[{"v":2}],"sides":4,"type":"R"},{"expr":"+","type":"M"},{"dice":1,"results":[{"v":1}],"sides":4,"type":"R"},{"expr":")+(-1","type":"M"},{"text":"STR","type":"L"},{"expr":"+0","type":"M"},{"text":"MOD","type":"L"},{"expr":"+0","type":"M"},{"text":"TEMP","type":"L"},{"expr":"+0","type":"M"},{"text":"QUERY","type":"L"},{"expr":")*2)","type":"M"}],"total":1,"type":"V"},"rollid":"-MI6WhboFG-kzCgyN3T5","signature":"a0c5a33503fd7ee8cb9f03e77bfc9aef1192028d9eb8032423a1bafafd2a692ca56c29a064beb1e7b9c58bfe309b627bcca9d0000e3c4430048c5ba387b7bfd0"},{"expression":"1d4+-1[STR] + 0[MOD] + 0[TEMP] + 0[QUERY]","results":{"resultType":"sum","rolls":[{"dice":1,"results":[{"v":3}],"sides":4,"type":"R"},{"expr":"+-1","type":"M"},{"text":"STR","type":"L"},{"expr":"+0","type":"M"},{"text":"MOD","type":"L"},{"expr":"+0","type":"M"},{"text":"TEMP","type":"L"},{"expr":"+0","type":"M"},{"text":"QUERY","type":"L"}],"total":2,"type":"V"},"rollid":"-MI6WhboFG-kzCgyN3T6","signature":"223938bb691318db9d6f3cbb39f19596ea281425b4b826545bad3e49b94e441b4bb76ad5237b681ab37a9788e3a091cec8537b20a72e783cc150a46d0ca03152"},{"expression":"((1d4+1d4) + (-1[STR] + 0[MOD] + 0[TEMP] + 0[QUERY]) * 2)","results":{"resultType":"sum","rolls":[{"expr":"((","type":"M"},{"dice":1,"results":[{"v":2}],"sides":4,"type":"R"},{"expr":"+","type":"M"},{"dice":1,"results":[{"v":4}],"sides":4,"type":"R"},{"expr":")+(-1","type":"M"},{"text":"STR","type":"L"},{"expr":"+0","type":"M"},{"text":"MOD","type":"L"},{"expr":"+0","type":"M"},{"text":"TEMP","type":"L"},{"expr":"+0","type":"M"},{"text":"QUERY","type":"L"},{"expr":")*2)","type":"M"}],"total":4,"type":"V"},"rollid":"-MI6WhbqvjD9Ey4IUxSB","signature":"65048a82dec6dccb525dd0d1eaca434b7b9e4eacb1cf91046b188e965ccbd033cd04b98135deb459b7d027377fed49001399713ead5a91765defc47817cda174"},{"expression":"5d6 + 0[Ability] + 0[MOD] + 0[TEMP] + 0[QUERY]","results":{"resultType":"sum","rolls":[{"dice":5,"results":[{"v":1},{"v":3},{"v":3},{"v":2},{"v":4}],"sides":6,"type":"R"},{"expr":"+0","type":"M"},{"text":"Ability","type":"L"},{"expr":"+0","type":"M"},{"text":"MOD","type":"L"},{"expr":"+0","type":"M"},{"text":"TEMP","type":"L"},{"expr":"+0","type":"M"},{"text":"QUERY","type":"L"}],"total":13,"type":"V"},"rollid":"-MI6WhbqvjD9Ey4IUxSC","signature":"00e086cf74e18fbb463c542ca9c230aa1f3f3c28d0a4b18a9b6f584aab1852aec638955bacd8dd85a2e2570d287c4e4ed71a465937d597eb304ac8424713b6cc"},{"expression":"((5d6+5d6) + (0[Ability] + 0[MOD] + 0[TEMP] + 0[QUERY]) * 2)","results":{"resultType":"sum","rolls":[{"expr":"((","type":"M"},{"dice":5,"results":[{"v":3},{"v":4},{"v":1},{"v":5},{"v":2}],"sides":6,"type":"R"},{"expr":"+","type":"M"},{"dice":5,"results":[{"v":5},{"v":1},{"v":5},{"v":2},{"v":3}],"sides":6,"type":"R"},{"expr":")+(0","type":"M"},{"text":"Ability","type":"L"},{"expr":"+0","type":"M"},{"text":"MOD","type":"L"},{"expr":"+0","type":"M"},{"text":"TEMP","type":"L"},{"expr":"+0","type":"M"},{"text":"QUERY","type":"L"},{"expr":")*2)","type":"M"}],"total":31,"type":"V"},"rollid":"-MI6WhbsmkLPgZ2qeEYn","signature":"a767c50663901f742b065ee2ec5d15a62a26792931063c2f73396bc06b5e7855312e95f381cc65374fd28f31fcc6968a9bf9ccd2854237bc63736ec985f09d91"},{"expression":"5d6 + 0[Ability] + 0[MOD] + 0[TEMP] + 0[QUERY]","results":{"resultType":"sum","rolls":[{"dice":5,"results":[{"v":2},{"v":5},{"v":2},{"v":6},{"v":3}],"sides":6,"type":"R"},{"expr":"+0","type":"M"},{"text":"Ability","type":"L"},{"expr":"+0","type":"M"},{"text":"MOD","type":"L"},{"expr":"+0","type":"M"},{"text":"TEMP","type":"L"},{"expr":"+0","type":"M"},{"text":"QUERY","type":"L"}],"total":18,"type":"V"},"rollid":"-MI6WhbsmkLPgZ2qeEYo","signature":"6c05a06c1c561202c7d4598d5dabc4fc2d8a92db4b9a8fc53c726d1a55464c1f9a5752cc6c67e8f2cefead525eed169883be7bb5f61e7a37fbc8a6c28d551922"},{"expression":"((5d6+5d6) + (0[Ability] + 0[MOD] + 0[TEMP] + 0[QUERY]) * 2)","results":{"resultType":"sum","rolls":[{"expr":"((","type":"M"},{"dice":5,"results":[{"v":4},{"v":1},{"v":1},{"v":3},{"v":2}],"sides":6,"type":"R"},{"expr":"+","type":"M"},{"dice":5,"results":[{"v":4},{"v":3},{"v":4},{"v":5},{"v":5}],"sides":6,"type":"R"},{"expr":")+(0","type":"M"},{"text":"Ability","type":"L"},{"expr":"+0","type":"M"},{"text":"MOD","type":"L"},{"expr":"+0","type":"M"},{"text":"TEMP","type":"L"},{"expr":"+0","type":"M"},{"text":"QUERY","type":"L"},{"expr":")*2)","type":"M"}],"total":32,"type":"V"},"rollid":"-MI6WhbuaR2YN5LCZnN2","signature":"4aea1b77f15323bc764cdaae4d9f6fd493e9956d2ab688fa3cdf595b34109acb685e9ddddc491ed6e132384119d24f90a780846b481f8318b0e00027f52bd801"},{"expression":"0","results":{"resultType":"M","rolls":[{"expr":0,"type":"M"}],"total":0,"type":"V"},"signature":false}],"playerid":"-MHfzytbYjUHViyumQwk","rolltemplate":"pc","target":"gm","target_name":"GM","type":"whisper","who":"Misatos A. (GM)"},"-MI6WmU74COYFUhoftxI":{".priority":1601075357760.0,"avatar":"/users/avatar/5436010/30","content":"  {{smallname=Sap}} {{type=attack}} {{showchar=$[[0]]}} {{charname=Jess}} {{nonlethal=$[[1]]}} {{attack=1}} {{roll1=$[[2]]}} {{critconfirm1=$[[3]]}} {{conditionsflag=$[[4]]}} {{conditions= }} {{conditionsnote= }}","inlinerolls":[{"expression":"1","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"}],"total":1,"type":"V"},"signature":false},{"expression":"1[Nonlethal]","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"},{"text":"Nonlethal","type":"L"}],"total":1,"type":"V"},"signature":false},{"expression":"1d20cs>20 + 1[Melee] + 5[DEX] + 0[MOD] + 0[TEMP] + (0)[CONDITION] + 0[QUERY]","results":{"resultType":"sum","rolls":[{"dice":1,"mods":{"customCrit":[{"comp":">=","point":20}]},"results":[{"v":2}],"sides":20,"type":"R"},{"expr":"+1","type":"M"},{"text":"Melee","type":"L"},{"expr":"+5","type":"M"},{"text":"DEX","type":"L"},{"expr":"+0","type":"M"},{"text":"MOD","type":"L"},{"expr":"+0","type":"M"},{"text":"TEMP","type":"L"},{"expr":"+(0)","type":"M"},{"text":"CONDITION","type":"L"},{"expr":"+0","type":"M"},{"text":"QUERY","type":"L"}],"total":8,"type":"V"},"rollid":"-MI6WmPj6U2IlcSk3aUv","signature":"7547b1db2b56bd2c7ca5d145388559dc1ac26abc4b42b81b905303224385cd4a5289417798b3737408dfe20c9e3e3808b17ade834bcf6d5fbeb6740a2e9a442b"},{"expression":"1d20cs20 + 1[Melee] + 5[DEX] + 0[MOD] + 0[TEMP] + (0)[CONDITION] + 0[QUERY] + 0[CRIT CONFIRM BONUS]","results":{"resultType":"sum","rolls":[{"dice":1,"mods":{"customCrit":[{"comp":"==","point":20}]},"results":[{"v":7}],"sides":20,"type":"R"},{"expr":"+1","type":"M"},{"text":"Melee","type":"L"},{"expr":"+5","type":"M"},{"text":"DEX","type":"L"},{"expr":"+0","type":"M"},{"text":"MOD","type":"L"},{"expr":"+0","type":"M"},{"text":"TEMP","type":"L"},{"expr":"+(0)","type":"M"},{"text":"CONDITION","type":"L"},{"expr":"+0","type":"M"},{"text":"QUERY","type":"L"},{"expr":"+0","type":"M"},{"text":"CRIT CONFIRM BONUS","type":"L"}],"total":13,"type":"V"},"rollid":"-MI6WmPkUBTo-1NS4dsC","signature":"6d15d41041c45d56e7d3a5174f933cce7aaf12eb485d8d83be12eec9ca668b7c65deca1c740c86bcacd128bb343e56bb56788a6082b60873566b6f93d5ac43e9"},{"expression":"0","results":{"resultType":"M","rolls":[{"expr":0,"type":"M"}],"total":0,"type":"V"},"signature":false}],"playerid":"-MHfzytbYjUHViyumQwk","rolltemplate":"pc","target":"gm","target_name":"GM","type":"whisper","who":"Misatos A. (GM)"},"-MIFe1xU4m_39lrW2fey":{".priority":1601228517464.0,"avatar":"/users/avatar/7349062/30","content":"  {{name=^{sleight_of_hand}}} {{type=skill}} {{showchar=$[[0]]}} {{charname=Boarboara Char}} {{roll=$[[1]]}} {{shownotes=$[[2]]}} {{notes=}} {{conditionsflag=$[[3]]}} {{conditions= }} {{conditionsnote=}}","inlinerolls":[{"expression":"1","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"}],"total":1,"type":"V"},"signature":false},{"expression":"1d20+3[MOD]+(0)[CONDITION]+0[QUERY]","results":{"resultType":"sum","rolls":[{"dice":1,"results":[{"v":4}],"sides":20,"type":"R"},{"expr":"+3","type":"M"},{"text":"MOD","type":"L"},{"expr":"+(0)","type":"M"},{"text":"CONDITION","type":"L"},{"expr":"+0","type":"M"},{"text":"QUERY","type":"L"}],"total":7,"type":"V"},"rollid":"-MIFDZzWNN2ZC-meKC7w","signature":"15e3100eaec907637394ed3e268c6ed9a7c8db085ec8ab46b9bdd1745932fbd4a80d241e2c4c2d4192d7af114e2ab7077ab6858d029c9c228cf2f951400bc30d"},{"expression":"1","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"}],"total":1,"type":"V"},"signature":false},{"expression":"0","results":{"resultType":"M","rolls":[{"expr":0,"type":"M"}],"total":0,"type":"V"},"signature":false}],"playerid":"-MI-lFUEhYM3FdupHoVE","rolltemplate":"pc","type":"general","who":"Boarboara"},"-MIGhKsXy3iG9VCqm8jQ":{".priority":1601246158555.0,"avatar":"/users/avatar/7349062/30","content":"  {{name=^{appraise}}} {{type=skill}} {{showchar=$[[0]]}} {{charname=Boarboara Char}} {{roll=$[[1]]}} {{shownotes=$[[2]]}} {{notes=}} {{conditionsflag=$[[3]]}} {{conditions= }} {{conditionsnote=}}","inlinerolls":[{"expression":"1","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"}],"total":1,"type":"V"},"signature":false},{"expression":"1d20+1[MOD]+(0)[CONDITION]+0[QUERY]","results":{"resultType":"sum","rolls":[{"dice":1,"results":[{"v":11}],"sides":20,"type":"R"},{"expr":"+1","type":"M"},{"text":"MOD","type":"L"},{"expr":"+(0)","type":"M"},{"text":"CONDITION","type":"L"},{"expr":"+0","type":"M"},{"text":"QUERY","type":"L"}],"total":12,"type":"V"},"rollid":"-MIGGs-cnSz3vq-fdHy1","signature":"90b6a0019683a476a259ef3afd6ff2a396eb2f07fb87db47e63dcad571aaca0331594a43adc9bdec03b74fa8ef31f2f15c744d18dc1b1d7883d45ac2fddc9631"},{"expression":"1","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"}],"total":1,"type":"V"},"signature":false},{"expression":"0","results":{"resultType":"M","rolls":[{"expr":0,"type":"M"}],"total":0,"type":"V"},"signature":false}],"playerid":"-MI-lFUEhYM3FdupHoVE","rolltemplate":"pc","type":"general","who":"Boarboara"},"-MIKKI6M6A13OQ85ouul":{".priority":1601306964625.0,"avatar":"/users/avatar/7349062/30","content":"  {{name=^{sleight_of_hand}}} {{type=skill}} {{showchar=$[[0]]}} {{charname=Boarboara Char}} {{roll=$[[1]]}} {{shownotes=$[[2]]}} {{notes=}} {{conditionsflag=$[[3]]}} {{conditions= }} {{conditionsnote=}}","inlinerolls":[{"expression":"1","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"}],"total":1,"type":"V"},"signature":false},{"expression":"1d20+6[MOD]+(0)[CONDITION]+0[QUERY]","results":{"resultType":"sum","rolls":[{"dice":1,"results":[{"v":12}],"sides":20,"type":"R"},{"expr":"+6","type":"M"},{"text":"MOD","type":"L"},{"expr":"+(0)","type":"M"},{"text":"CONDITION","type":"L"},{"expr":"+0","type":"M"},{"text":"QUERY","type":"L"}],"total":18,"type":"V"},"rollid":"-MIKKI6hwhwIxJJP8OJu","signature":"22462080ee4b479d687fcc3568a99d0e0c32cc10c68a3055ad9c48c307ea1d685cb220d1d8be6ab4f4976613e9f4ccf71497b438a714cde8f2c598674d8911cb"},{"expression":"1","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"}],"total":1,"type":"V"},"signature":false},{"expression":"0","results":{"resultType":"M","rolls":[{"expr":0,"type":"M"}],"total":0,"type":"V"},"signature":false}],"playerid":"-MI-lFUEhYM3FdupHoVE","rolltemplate":"pc","type":"general","who":"Boarboara"},"-MIKKLRmYMD_ql2OuPKB":{".priority":1601306978287.0,"avatar":"/users/avatar/7349062/30","content":"  {{name=^{diplomacy}}} {{type=skill}} {{showchar=$[[0]]}} {{charname=Boarboara Char}} {{roll=$[[1]]}} {{shownotes=$[[2]]}} {{notes=}} {{conditionsflag=$[[3]]}} {{conditions= }} {{conditionsnote=}}","inlinerolls":[{"expression":"1","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"}],"total":1,"type":"V"},"signature":false},{"expression":"1d20+8[MOD]+(0)[CONDITION]+0[QUERY]","results":{"resultType":"sum","rolls":[{"dice":1,"results":[{"v":5}],"sides":20,"type":"R"},{"expr":"+8","type":"M"},{"text":"MOD","type":"L"},{"expr":"+(0)","type":"M"},{"text":"CONDITION","type":"L"},{"expr":"+0","type":"M"},{"text":"QUERY","type":"L"}],"total":13,"type":"V"},"rollid":"-MIKKLU16U09zoxJVYMI","signature":"62315d9bc1e80005aa17a2571d9e16074341cf23d8415283cf3c0da06815b4fd7c566a64787d47bee97e1ae0b8ff7f25ac77b33db2e2b7c5c7cf788eea693f4d"},{"expression":"1","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"}],"total":1,"type":"V"},"signature":false},{"expression":"0","results":{"resultType":"M","rolls":[{"expr":0,"type":"M"}],"total":0,"type":"V"},"signature":false}],"playerid":"-MI-lFUEhYM3FdupHoVE","rolltemplate":"pc","type":"general","who":"Boarboara"},"-MIOk22UA90Z1CIs-Lnt":{".priority":1601381085535.0,"avatar":"/users/avatar/1004837/30","content":"  {{name=^{appraise}}} {{type=skill}} {{showchar=$[[0]]}} {{charname=Alyn Grantham}} {{roll=$[[1]]}} {{shownotes=$[[2]]}} {{notes=}} {{conditionsflag=$[[3]]}} {{conditions= }} {{conditionsnote=}}","inlinerolls":[{"expression":"1","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"}],"total":1,"type":"V"},"signature":false},{"expression":"1d20+0[MOD]+(0)[CONDITION]+0[QUERY]","results":{"resultType":"sum","rolls":[{"dice":1,"results":[{"v":7}],"sides":20,"type":"R"},{"expr":"+0","type":"M"},{"text":"MOD","type":"L"},{"expr":"+(0)","type":"M"},{"text":"CONDITION","type":"L"},{"expr":"+0","type":"M"},{"text":"QUERY","type":"L"}],"total":7,"type":"V"},"rollid":"-MIOk1LPmX1DjyyzD92M","signature":"0a53497bff7154255044f88a28c1c7b0132094a3026dd9890ab251dd9056b721e5064810e4416b6abd59a82314722e3ca666637db5553bca849d1aea514aa281"},{"expression":"1","results":{"resultType":"M","rolls":[{"expr":1,"type":"M"}],"total":1,"type":"V"},"signature":false},{"expression":"0","results":{"resultType":"M","rolls":[{"expr":0,"type":"M"}],"total":0,"type":"V"},"signature":false}],"playerid":"-MHg4gg3Eaij4VeiKaZd","rolltemplate":"pc","type":"general","who":"Anthony R."},"-MIQEoXRXRlIfVSJQv-G":{".priority":1601406192273.0,"avatar":"/users/avatar/5436010/30","content":"{\"type\":\"V\",\"rolls\":[{\"type\":\"R\",\"dice\":4,\"sides\":8,\"mods\":{},\"results\":[{\"v\":5},{\"v\":5},{\"v\":8},{\"v\":8}]},{\"type\":\"M\",\"expr\":\"+13\"}],\"resultType\":\"sum\",\"total\":39}","origRoll":"4d8 + 13","playerid":"-MHfzytbYjUHViyumQwk","signature":"2efa31d890138c8a455f70ed493b8a55a4f86c083b5c5caaae4db5853fab7938ed8219e560c6704b79e2a109b274be805f8a23d9929a088ec5f3247cb96f4380","type":"gmrollresult","who":"Misatos A. (GM)"},"-MIQidsbIxFO03rcV87l":{".priority":1601414275110.0,"avatar":"/users/avatar/5436010/30","content":"{\"type\":\"V\",\"rolls\":[{\"type\":\"R\",\"dice\":6,\"sides\":10,\"mods\":{},\"results\":[{\"v\":1},{\"v\":5},{\"v\":5},{\"v\":1},{\"v\":9},{\"v\":1}]},{\"type\":\"M\",\"expr\":\"+12\"}],\"resultType\":\"sum\",\"total\":34}","origRoll":"6d10 + 12","playerid":"-MHfzytbYjUHViyumQwk","signature":"7941fc54eeb978913f3a86c037c6b8b6f33e4fa263b3890e82d7964b2e241e32b301a90ad392905be2506c5d14d19018abe8296d6508cea8eb5c3b837fbbe8f9","type":"gmrollresult","who":"Misatos A. (GM)"}}]`

	var msgStream MsgStream
	err := json.Unmarshal([]byte(jsonData), &msgStream)
	if err != nil {
		t.Errorf("JSON Parse failed: "+err.Error())
	}
	if len(msgStream) != 2 {
		t.Errorf("Found %d inline message groups, expected 2", len(msgStream))
	}
	block := msgStream[1]
	if len(block) != 40 {
		t.Errorf("Found %d inline messages in block, expected 40", len(block))
	}
	hasRollsCnt := 0;
	hasNoRollsCnt := 0;

	for _, msg := range block {
		if msg.HasRollResults() {
			hasRollsCnt++
		} else {
			hasNoRollsCnt++;
		}
	}
	if hasRollsCnt != 21 || hasNoRollsCnt != 19 {
		t.Errorf("Found %d inline messages with rolls and %d without, expected 21 with, 19 without", hasRollsCnt, hasNoRollsCnt)
	}

}
